<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  
  <title>Git学习笔记之分支管理 - 黄阿信</title>
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    <link rel='manifest' href='/manifest.json'>
  

  
  
  
  <meta property="og:title" content="Git学习笔记之分支管理 - 黄阿信" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:url" content="https://yalexin.gitee.io/2022/02/09/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/index.html" />
  
  <meta property="og:image" content="/favicon.png" />
  
  <meta property="og:article:published_time" content="2022-02-09T06:55:23.000Z" />
  
  <meta property="og:article:author" content="YaleXin" />
  
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
<link rel="stylesheet" href="/css/rainbow-banner.css">

  
  
  
<link rel="stylesheet" href="/css/toc.css">

  
  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  

  
</head>
    <body
        data-color-scheme="auto"
        data-uppercase-categories="true"
        
        data-rainbow-banner="true"
        data-rainbow-banner-shown="auto"
        data-rainbow-banner-month="6"
        data-rainbow-banner-colors="#e50000,#ff8d00,#ffee00,#008121,#004cff,#760188"
        
        data-config-root="/"
        
        data-toc="true"
        data-toc-max-depth="2"
        
        
    >
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Blog</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">Home</a>
            
            
            <a class="nav-item" href="/archives">Archives</a>
            
            
            
            <a class="nav-item" href="/friends">Friends</a>
            
            
            
            <a class="nav-item" href="/projects">Projects</a>
            
            
            
            <a class="nav-item" href="/about">About</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/MrWillCom" target="_blank" aria-label="GitHub">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-codepen nav-item-icon" href="https://codepen.io/mrwillcom" target="_blank" aria-label="CodePen">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-patreon nav-item-icon" href="https://www.patreon.com/MrWillCom" target="_blank" aria-label="Patreon">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-mastodon nav-item-icon" href="https://noc.social/@MrWillCom" target="_blank" aria-label="Mastodon">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-discord nav-item-icon" href="https://discord.gg/UKuFDjcfY8" target="_blank" aria-label="Discord">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-search nav-item-icon" href="/search" target="_blank" aria-label="Search">&nbsp;</a>
            
            
        </div>
    </div>
</nav>
        
<article class="post">
    <div class="meta">
        
        <div class="categories text-uppercase">
        
            <a href="/categories/笔记/">笔记</a>
        
        </div>
        

        
        <div class="date" id="date">
            <span>February</span>
            <span>9,</span>
            <span>2022</span>
        </div>
        

        <h1 class="title">Git学习笔记之分支管理</h1>
    </div>

    <div class="divider"></div>

    <div class="content">
        <p>书接上回，本文主要介绍<code>Git</code>的分支管理操作。</p>
<p><code>Git</code>的分支功能为我们团队分工提供了方便，并且每一个分支在合并之前不会对另外的分支产生影响：</p>
<a id="more"></a>

<p><img src="https://qiniu.yalexin.top/branch.drawio.png" alt></p>
<p>与分支管理相关的命令：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>git branch (branchname)</td>
<td>创建分支</td>
<td>git checkout/switch (branchname)</td>
<td>切换分支</td>
</tr>
<tr>
<td>git merge (branchname)</td>
<td>合并指定分支</td>
<td>git branch</td>
<td>列出所有分支</td>
</tr>
<tr>
<td>git branch -d (branchname)</td>
<td>删除指定分支</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><code>Git</code>默认给我们生成了一个<code>master</code>主分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>我们之前说的<code>HEAD</code>指向当前版本，严格来说是指向<code>master</code>，而<code>master</code>指向的是该分支的最新提交，因此<code>HEAD</code>指向的是最新提交，熟悉类<code>C</code>语言的指针相关知识应该很容易理解这部分内容。</p>
<p><img src="https://qiniu.yalexin.top/branch.drawio2.png" alt></p>
<h2 id="使用分支"><a href="#使用分支" class="headerlink" title="使用分支"></a>使用分支</h2><h3 id="新建分支"><a href="#新建分支" class="headerlink" title="新建分支"></a>新建分支</h3><p>新建一个前端分支<code>front</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch -c front</span></span><br><span class="line">Switched to a new branch 'front'</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>-c</code>代表新建一个分支 <code>switch</code>代表切换分支</p>
</blockquote>
<p>确保当前所在分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line">* front</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>

<p>在该分支下新建我们的文件<code>front.txt</code>，并提交</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> touch front.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add front.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"new front branch"</span></span></span><br></pre></td></tr></table></figure>

<p>我们再转回主分支<code>master</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch master</span></span><br><span class="line">Switched to branch 'master'</span><br></pre></td></tr></table></figure>

<p>此时我们会发现我们之前新建的<code>front.txt</code>文件不见了，这是因为该文件是在<code>front</code>分支下提交的，此时的前端分支比我们的主分支“提前”。</p>
<p>同样的方法新建一个接口分支并加一个文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch -c interface</span></span><br><span class="line">Switched to a new branch 'interface'</span><br><span class="line"><span class="meta">$</span><span class="bash"> touch interface.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add interface.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"new interface branch"</span></span></span><br><span class="line">[interface 824a607] new interface branch</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 interface.txt</span><br><span class="line"><span class="meta"> $</span><span class="bash"> git switch master</span></span><br><span class="line">Switched to branch 'master'</span><br></pre></td></tr></table></figure>

<p>此时仓库情况如图：</p>
<p><img src="https://qiniu.yalexin.top/branch.drawio3.png" alt></p>
<h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><p>两边的人员工作都做完了，就可以考虑合并了，毕竟一直单干啥事都干不了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge front</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge interface</span></span><br></pre></td></tr></table></figure>

<p>意思是依次将当前分支（即<code>master</code>）合并到目标分支，我们尝试合并第二个时可能会遇到下面的情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Merge branch 'interface'</span><br><span class="line"><span class="meta">#</span><span class="bash"> Please enter a commit message to explain why this merge is necessary,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> especially <span class="keyword">if</span> it merges an updated upstream into a topic branch.</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Lines starting with <span class="string">'#'</span> will be ignored, and an empty message aborts</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> the commit.</span></span><br></pre></td></tr></table></figure>

<p>意思是说希望我们能够给出合理的解释，为什么要合并这两个分支，我们可以直接关闭（ 按键盘左上角<code>Esc</code>，输入<code>:wq</code>即可退出）也可以写入一些信息（ 按键盘字母 <code>i</code> 进入<code>insert</code>模式并输入说明然后关闭 ）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">merge front and interface</span><br></pre></td></tr></table></figure>

<p>然后我们的当前主分支下就会出现<code>front.txt</code>和<code>interface.txt</code>两个文件了。</p>
<h3 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h3><p>我们合并好分支后，对于不需要的分支可以删除，不会对我们目前的分支产生影响，因为我们当前的主分支比两个分支都“提前”，<strong>删除实际上删除的是指针</strong>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -d front</span></span><br><span class="line">Deleted branch front (was 0c93a6f).</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -d interface</span></span><br><span class="line">Deleted branch interface (was 824a607).</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line">* master</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br><span class="line">commit 844e6a7ef9d46e3386bb0e18fecef93121f1831c (HEAD -&gt; master)</span><br><span class="line">Merge: 0c93a6f 824a607</span><br><span class="line">Author: YaleXin &lt;495592364@qq.com&gt;</span><br><span class="line">Date:   Wed Feb 9 15:03:51 2022 +0800</span><br><span class="line"></span><br><span class="line">    merge front and interface</span><br><span class="line"></span><br><span class="line">commit 824a60792b798f2ae9dfb55859142c41773573ad</span><br><span class="line">Author: YaleXin &lt;495592364@qq.com&gt;</span><br><span class="line">Date:   Wed Feb 9 14:45:35 2022 +0800</span><br><span class="line"></span><br><span class="line">    new interface branch</span><br><span class="line"></span><br><span class="line">commit 0c93a6f1f8ca2c884040437b3568514518ffbb7a</span><br><span class="line">Author: YaleXin &lt;495592364@qq.com&gt;</span><br><span class="line">Date:   Wed Feb 9 14:37:57 2022 +0800</span><br><span class="line"></span><br><span class="line">    new front branch</span><br><span class="line">:</span><br></pre></td></tr></table></figure>

<p>可以发现我们的提交都没有丢失</p>
<h3 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h3><p>当然了合并也不是每一次都能愉快地进行，不然前后端之间的矛盾也不会有这么多了。</p>
<p>假如前端说<code>JavaScript</code>是世界上最好的语言！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch -c front</span></span><br><span class="line">Switched to a new branch 'front'</span><br></pre></td></tr></table></figure>

<p>新建<code>lan.txt</code>文件并在文件中输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`JavaScript`是世界上最好的语言！</span><br></pre></td></tr></table></figure>

<p>然后提交</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line">warning: LF will be replaced by CRLF in lan.txt.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"最好的语言"</span></span></span><br><span class="line">[front 2ba9fe4] 最好的语言</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 lan.txt</span><br></pre></td></tr></table></figure>

<p>而后端的人却说<code>Java</code>是世界上最好的语言！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch master</span></span><br><span class="line">Switched to branch 'master'</span><br></pre></td></tr></table></figure>

<p>新建<code>lan.txt</code>文件并在文件中输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`Java`是世界上最好的语言！</span><br></pre></td></tr></table></figure>

<p>然后提交</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line">warning: LF will be replaced by CRLF in lan.txt.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"最好的语言"</span></span></span><br><span class="line">[master 8ee9862] 最好的语言</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 lan.txt</span><br></pre></td></tr></table></figure>

<p>然后尝试合并</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge front</span></span><br><span class="line">Auto-merging lan.txt</span><br><span class="line">CONFLICT (add/add): Merge conflict in lan.txt</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure>

<p>这可把<code>Git</code>难住了，不同的分支对同一文件有不同的修改方式，<code>Git</code>尽最大能力也无法将其合并，现在只能我们自己手动合并冲突了。</p>
<p>我们打开<code>lan.txt</code>文件可以发现</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat lan.txt</span></span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">`Java`是世界上最好的语言！</span><br><span class="line">=======</span><br><span class="line">`JavaScript`是世界上最好的语言！</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;&gt;&gt; front</span></span><br></pre></td></tr></table></figure>

<p>上面表明<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>和<code>=======</code>之间的是当前分支的内容，<code>=======</code>和<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>之间的是<code>front</code>分支的内容，我们手动将其改成</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">自然语言是世界上最好的语言！</span><br></pre></td></tr></table></figure>

<p>然后提交</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"你们俩别吵了"</span></span></span><br><span class="line">[master 7cec3a6] 你们俩别吵了</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br><span class="line">commit 7cec3a623357cbea756a12235a995df2f85d6eed (HEAD -&gt; master)</span><br><span class="line">Merge: 8ee9862 2ba9fe4</span><br><span class="line">Author: YaleXin &lt;495592364@qq.com&gt;</span><br><span class="line">Date:   Wed Feb 9 16:06:57 2022 +0800</span><br><span class="line"></span><br><span class="line">    你们俩别吵了</span><br><span class="line"></span><br><span class="line">commit 8ee98627480b081d1885f8adcb7aad9580c2910c</span><br><span class="line">Author: YaleXin &lt;495592364@qq.com&gt;</span><br><span class="line">Date:   Wed Feb 9 15:55:50 2022 +0800</span><br><span class="line"></span><br><span class="line">    最好的语言</span><br><span class="line"></span><br><span class="line">commit 2ba9fe41d1379e4d57077f6d76ba7ed7e4ec55cd (front)</span><br><span class="line">Author: YaleXin &lt;495592364@qq.com&gt;</span><br><span class="line">Date:   Wed Feb 9 15:51:01 2022 +0800</span><br><span class="line"></span><br><span class="line">    最好的语言</span><br></pre></td></tr></table></figure>

<h2 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h2><h3 id="开发分支"><a href="#开发分支" class="headerlink" title="开发分支"></a>开发分支</h3><p> 通常，合并分支时，如果没有冲突，并且分支是单向一条线路继承下来的，git会使用 <code>fast forword</code>模式，但是有些快速合并不能成功，但是又没有冲突时，就会触发分支管理策略，<code>Git</code>会自动做一次新的提交。 </p>
<p>当然我们也可以手动强制禁用<code>Fast forward</code>模式，<code>Git</code>就会在<code>merge</code>时生成一个新的<code>commit</code>.</p>
<p>我们来看一下区别：</p>
<p>首先新建一个分支并修改<code>lan.txt</code>，然后使用<strong>默认方式</strong>合并</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch -c default</span></span><br><span class="line">Switched to a new branch 'default'</span><br><span class="line">修改lan.txt文件</span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"default commit"</span></span></span><br><span class="line">[default e167bc0] default commit</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line"><span class="meta">$</span><span class="bash"> git switch master</span></span><br><span class="line">Switched to branch 'master'</span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge default</span></span><br><span class="line">Updating 7cec3a6..e167bc0</span><br><span class="line">Fast-forward</span><br><span class="line"> lan.txt | 2 +-</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>

<p>我们再查看提交情况：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --pretty=oneline --abbrev-commit --graph</span></span><br><span class="line">* e167bc0 (HEAD -&gt; master, default) default commit</span><br><span class="line">*   7cec3a6 你们俩别吵了</span><br><span class="line">|\</span><br><span class="line">| * 2ba9fe4 最好的语言</span><br><span class="line">* | 8ee9862 最好的语言</span><br><span class="line">|/</span><br><span class="line">*   844e6a7 merge front and interface</span><br><span class="line">|\</span><br><span class="line">| * 824a607 new interface branch</span><br><span class="line">* | 0c93a6f new front branch</span><br><span class="line">|/</span><br><span class="line">* dcfdaa2 3</span><br><span class="line">* e54198e second commit</span><br><span class="line">* bbe2a77 first commit</span><br></pre></td></tr></table></figure>

<p>合并情况如图所示</p>
<p><img src="https://qiniu.yalexin.top/branch.drawio4.png" alt></p>
<p>让我们再来个禁用<code>Fast forward</code>模式的合并</p>
<p>新建一个分支并修改<code>lan.txt</code>，然后使用<strong>禁用<code>Fast forward</code>模式</strong>合并</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git switch -c noFast</span></span><br><span class="line">Switched to a new branch 'noFast'</span><br><span class="line">修改lan.txt文件</span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"noFast commit"</span></span></span><br><span class="line">[noFast f7f1ef6] noFast commit</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br><span class="line"><span class="meta">$</span><span class="bash"> git switch master</span></span><br><span class="line">Switched to branch 'master'</span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge --no-ff -m <span class="string">"merge by no-ff"</span> noFast</span></span><br><span class="line">Merge made by the 'ort' strategy.</span><br><span class="line"> lan.txt | 3 ++-</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --pretty=oneline --abbrev-commit --graph</span></span><br><span class="line">*   274515d (HEAD -&gt; master) merge by no-ff</span><br><span class="line">|\</span><br><span class="line">| * f7f1ef6 (noFast) noFast commit</span><br><span class="line">|/</span><br><span class="line">* e167bc0 (default) default commit</span><br><span class="line">*   7cec3a6 你们俩别吵了</span><br><span class="line">|\</span><br><span class="line">| * 2ba9fe4 最好的语言</span><br><span class="line">* | 8ee9862 最好的语言</span><br><span class="line">|/</span><br><span class="line">*   844e6a7 merge front and interface</span><br><span class="line">|\</span><br><span class="line">| * 824a607 new interface branch</span><br><span class="line">* | 0c93a6f new front branch</span><br><span class="line">|/</span><br><span class="line">* dcfdaa2 3</span><br><span class="line">* e54198e second commit</span><br><span class="line">* bbe2a77 first commit</span><br></pre></td></tr></table></figure>

<p>合并情况如图所示</p>
<p><img src="https://qiniu.yalexin.top/branch.drawio5.png" alt></p>
<p>即会<strong>自动提交一次</strong>。</p>
<p>有了上述清晰的认识以后，我们以后在日常使用<code>Git</code>开发的时候应该要秉承在<code>master</code>尽量少提交的理念，即尽可能稳定，最好只用来发布版本，然后在分支<code>dev</code>上进行日常开发，每逢大版本更新的时候再把它合并到主分支上面；当然了，在分工明确的前提下，每个人应该至少有属于自己的分支，然后定期合并到<code>dev</code>。</p>
<h3 id="临时分支"><a href="#临时分支" class="headerlink" title="临时分支"></a>临时分支</h3><p>前面讲到版本库的两条主要分支：<code>master</code>和<code>dev</code>。前者用于正式发布，后者用于日常开发。其实，常设分支只需要这两条就够了，不需要其他了。</p>
<p>但是，除了常设分支以外，还有一些临时性分支，用于应对一些特定目的的版本开发。临时性分支主要有三种：</p>
<ul>
<li>功能（<code>feature</code>）分支</li>
<li>预发布（<code>release</code>）分支</li>
<li>修补bug（<code>fixbug</code>）分支</li>
</ul>
<p>这三种分支都属于临时性需要，使用完以后，应该删除，使得代码库的常设分支始终只有<code>master</code>和<code>dev</code>。</p>
<h4 id="功能分支"><a href="#功能分支" class="headerlink" title="功能分支"></a>功能分支</h4><p> 它是为了开发某种特定功能，从<code>dev</code>分支上面分出来的，开发完成后，要再并入<code>dev</code>， 功能分支的名字，可以采用<code>feature-name</code>的形式命名。 </p>
<h4 id="预发布分支"><a href="#预发布分支" class="headerlink" title="预发布分支"></a>预发布分支</h4><p>预发布分支，它是指发布正式版本之前（即合并到<code>master</code>分支之前），我们可能需要有一个预发布的版本进行测试。预发布分支是从<code>dev</code>分支上面分出来的，预发布结束以后，必须合并进<code>dev</code>和<code>master</code>分支。它的命名，可以采用<code>release-*</code>的形式。</p>
<h4 id="修补分支"><a href="#修补分支" class="headerlink" title="修补分支"></a>修补分支</h4><p>软件正式发布以后，难免会出现<code>bug</code>。这时就需要创建一个分支，进行<code>bug</code>修补。</p>
<p>修补<code>bug</code>分支是从<code>master</code>分支上面分出来的。修补结束以后，再合并进<code>master</code>和<code>deev</code>分支。它的命名，可以采用<code>fixbug-*</code>的形式。</p>
<p>这里有一个场景，你手头上的工作还没做完，但是你接到一个比较紧急的修复任务的时候，你又不想暂时提交这半截子代码，该怎么办？</p>
<p><code>Git</code>提供了<code>stash</code>命令，它把所有未提交的修改（包括暂存的和非暂存的）都保存起来，用于后续恢复当前工作目录。 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line">On branch dev</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</span><br><span class="line">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span><br><span class="line">        modified:   front.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use "git add" and/or "git commit -a")</span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash</span></span><br><span class="line">Saved working directory and index state WIP on dev: 274515d merge by no-ff</span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line">On branch dev</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>

<p>等我们在新的分支上修复好<code>BUG</code>，并合并好分支，然后再将这个暂时的修复分支删除后，就可以切换到我们的<code>dev</code>分支上来继续我们的工作了。</p>
<p>可以看一下之前暂存的代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash list</span></span><br><span class="line">stash@&#123;0&#125;: WIP on dev: 274515d merge by no-ff</span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line">On branch dev</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>

<p>回复我们的工作有两种方法：</p>
<ul>
<li>用<code>git stash apply</code>恢复，但是恢复后，<code>stash</code>中的内容并不删除，你需要用<code>git stash drop</code>来删除 </li>
<li>用<code>git stash pop</code>，该方法在恢复的同时把<code>stash</code>中的内容也删了： </li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash pop</span></span><br><span class="line">On branch dev</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</span><br><span class="line">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span><br><span class="line">        modified:   front.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use "git add" and/or "git commit -a")</span><br><span class="line">Dropped refs/stash@&#123;0&#125; (414125ba81aaed29ef4736209c257077fb277202)</span><br></pre></td></tr></table></figure>

<p>然后我们就可以继续愉快地进行我们的工作了。</p>

    </div>

    
    <div class="about">
        <h1>About this Post</h1>
        <div class="details">
            <p>This post is written by YaleXin, licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0" target="_blank" rel="noopener">CC BY-NC 4.0</a>.</p>
        </div>
        
        <p class="tags">
            
            <i class="icon"></i>
            <a href="/tags/命令行/" class="tag">#命令行</a><a href="/tags/Git/" class="tag">#Git</a><a href="/tags/学习/" class="tag">#学习</a>
        </p>
        
    </div>
    

    <div class="container post-prev-next">
        
        <a href="/2022/02/10/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%A4%9A%E4%BA%BA%E5%8D%8F%E4%BD%9C/" class="next">
            <div>
                <div class="text">
                    <p class="label">Next</p>
                    <h3 class="title">Git学习笔记之多人协作</h3>
                </div>
            </div>
        </a>
        
        
        <a href="/2022/02/08/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BGit%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="prev">
            <div>
                <div class="text">
                    <p class="label">Previous</p>
                    <h3 class="title">Git学习笔记之Git基本操作</>
                </div>
            </div>
        </a>
        
    </div>

    
        
        
    
</article>

        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h2 class="title">Blog</h2>
                
                <a href="/" class="item">Blog</a>
                
                <a href="/archives" class="item">Archives</a>
                
                <a href="/tags" class="item">Tags</a>
                
                <a href="/categories" class="item">Categories</a>
                
                <a href="/search" class="item">Search</a>
                
                <a href="/friends" class="item">Friends</a>
                
                <a href="/projects" class="item">Projects</a>
                
                <a href="/resume" class="item">Resume</a>
                
                <a href="/about" class="item">About</a>
                
                <a href="/atom.xml" class="item">RSS</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Projects</h2>
                
                <a href="https://github.com/MrWillCom/rsa-cli" target="_blank" rel="noopener" class="item">RSA CLI</a>
                
                <a href="https://github.com/MrWillCom/hexo-theme-cupertino" target="_blank" rel="noopener" class="item">Hexo Theme Cupertino</a>
                
                <a href="https://github.com/MrWillCom/a-calendar" target="_blank" rel="noopener" class="item">A Calendar</a>
                
                <a href="https://github.com/MrWillCom/auto-mirroring-bucket" target="_blank" rel="noopener" class="item">Auto Mirroring Bucket</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Me</h2>
                
                <a href="https://github.com/MrWillCom" target="_blank" rel="noopener" class="item">GitHub</a>
                
                <a href="https://codepen.io/mrwillcom" target="_blank" rel="noopener" class="item">CodePen</a>
                
                <a href="https://www.patreon.com/MrWillCom" target="_blank" rel="noopener" class="item">Patreon</a>
                
                <a href="https://noc.social/@MrWillCom" target="_blank" rel="noopener" class="item">Mastodon</a>
                
                <a href="https://discord.gg/UKuFDjcfY8" target="_blank" rel="noopener" class="item">Discord</a>
                
                <a href="mailto:mr.will.com@outlook.com" class="item">Email</a>
                
            </div>
            
        </div>
        <span>&copy; 2024 YaleXin<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> </span>
        
        
            <br>
            <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
                <label>
                    <input type="radio" value="light">
                    <span>Light</span>
                </label>
                <label>
                    <input type="radio" value="dark">
                    <span>Dark</span>
                </label>
                <label>
                    <input type="radio" value="auto">
                    <span>Auto</span>
                </label>
            </div>
        
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
        
        

        
        <script src="https://unpkg.com/scrollreveal"></script>
        <script>
            window.addEventListener('load', () => {
                ScrollReveal({ delay: 250, reset: true, easing: 'cubic-bezier(0, 0, 0, 1)' })
                ScrollReveal().reveal('.post-list-item .cover-img img')
                ScrollReveal().reveal('.post-list-item, .card, .content p img, .content .block-large img', { distance: '60px', origin: 'bottom', duration: 800 })
            })
        </script>
        
    </body>
</html>